<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <title>Sudoku</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ff9f43">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <meta name="description" content="Sudoku educatiu amb notes, conflictes i temporitzador">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>
<body>
  <header>
    <div class="topbar">
      <button id="view-btn" class="icon-btn" title="Tipus de visualització" aria-label="Tipus de visualització">
        <span class="icon" aria-hidden="true">👁️</span>
      </button>
      <h1 id="app-title">Sudoku</h1>
      <div class="top-actions">
        <button id="info-btn" class="icon-btn" title="Informació" aria-label="Informació">
          <span class="icon" aria-hidden="true">ℹ️</span>
        </button>
        <button id="options-btn" class="icon-btn" title="Opcions" aria-label="Opcions">
          <span class="icon" aria-hidden="true">⚙️</span>
        </button>
      </div>
    </div>
    <div id="level-selector"></div>
  </header>

  <main>
    <div id="sudoku-grid" class="grid" role="grid" aria-label="Tauler de Sudoku 9 per 9"></div>
    <div id="mobile-keypad" class="keypad" aria-label="Teclat numèric">
      <button data-num="1">1</button>
      <button data-num="2">2</button>
      <button data-num="3">3</button>
      <button data-num="4">4</button>
      <button data-num="5">5</button>
      <button data-num="6">6</button>
      <button data-num="7">7</button>
      <button data-num="8">8</button>
      <button data-num="9">9</button>
      <button data-num="0">0</button>
    </div>
    <div class="actions">
      <button id="new-game-btn" type="button" class="btn-3d"><span class="icon" aria-hidden="true">✨</span><span class="label">Nou Sudoku</span></button>
      <button id="check-btn" type="button" class="btn-3d"><span class="icon" aria-hidden="true">✔️</span><span class="label">Comprova</span></button>
      <button id="hint-btn" type="button" class="btn-3d" title="Pista"><span class="icon" aria-hidden="true">💡</span><span class="label">Pista</span></button>
      <button id="notes-btn" type="button" class="toggle btn-3d"><span class="icon" aria-hidden="true">✏️</span><span class="label">Notes desactivades</span></button>
      <button id="feedback-btn" type="button" class="toggle btn-3d"><span class="icon" aria-hidden="true">⚡</span><span class="label">Feedback immediat</span></button>
      <button id="autonotes-btn" type="button" class="toggle btn-3d" title="Autonotes">Autonotes</button>
      <div id="digit-counters" aria-label="Comptador de dígits restants"></div>
      <span id="status-message" role="status" aria-live="polite"></span>
      <span id="best-time" aria-label="millor temps">Sense millor temps</span>
      <span id="timer" aria-label="temporitzador">00:00</span>
    </div>
  </main>

  <!-- Opcions Modal -->
  <div id="options-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="options-title">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="options-title">Opcions</h2>
        <button class="icon-btn modal-close" data-close="options-modal" aria-label="Tanca">✖</button>
      </div>
      <div class="modal-body">
        <div class="option-item">
          <span class="icon">⚡</span>
          <div class="text">
            <strong>Feedback immediat</strong>
            <small>Mostra conflictes a l’instant</small>
          </div>
          <label class="switch">
            <input type="checkbox" id="opt-feedback">
            <span class="slider"></span>
          </label>
        </div>
        <div class="option-item">
          <span class="icon">✏️</span>
          <div class="text">
            <strong>Notes</strong>
            <small>Activa les anotacions 3×3</small>
          </div>
          <label class="switch">
            <input type="checkbox" id="opt-notes">
            <span class="slider"></span>
          </label>
        </div>
        <div class="option-item">
          <span class="icon">👁️</span>
          <div class="text">
            <strong>Visualització</strong>
            <small>Clàssic / Alt contrast / Fosc</small>
          </div>
          <div class="segmented">
            <button data-view="classic" class="seg">Clàssic</button>
            <button data-view="contrast" class="seg">Contrast</button>
            <button data-view="dark" class="seg">Fosc</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Modal -->
  <div id="info-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="info-title">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="info-title">Informació</h2>
        <button class="icon-btn modal-close" data-close="info-modal" aria-label="Tanca">✖</button>
      </div>
      <div class="modal-body info-grid">
        <div class="card">
          <div class="icon">✨</div>
          <div class="title">Nou Sudoku</div>
          <div class="desc">Genera un nou tauler instantàniament.</div>
        </div>
        <div class="card">
          <div class="icon">✔️</div>
          <div class="title">Comprova</div>
          <div class="desc">Valida el tauler i marca errors.</div>
        </div>
        <div class="card">
          <div class="icon">💡</div>
          <div class="title">Pista</div>
          <div class="desc">Omple una casella correcta aleatòria.</div>
        </div>
        <div class="card">
          <div class="icon">✏️</div>
          <div class="title">Notes</div>
          <div class="desc">Mostra candidats 1–9 a cada casella.</div>
        </div>
        <div class="card">
          <div class="icon">⚡</div>
          <div class="title">Feedback</div>
          <div class="desc">Mostra conflictes al moment o en verificar.</div>
        </div>
        <div class="card">
          <div class="icon">👁️</div>
          <div class="title">Visualització</div>
          <div class="desc">Clàssic, Alt contrast o Mode fosc.</div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>Aplicació creada per <strong>Felip Sarroca</strong> amb l'assistència de la IA.</p>
    <p>
      <img src="assets/cc-by-nc-sa.svg" alt="Llicència Creative Commons" class="cc-logo">
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">
        CC BY-NC-SA 4.0
      </a>
    </p>
  </footer>

  <script src="script.js"></script>
  
</body>
</html>
