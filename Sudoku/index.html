<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <title>Sudoku</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ff9f43">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <meta name="description" content="Sudoku educatiu amb notes, conflictes i temporitzador">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>
<body>
  <header>
    <div class="topbar">
      <h1 id="app-title">Sudoku</h1>
      <div class="top-actions">
        <button id="info-btn" class="icon-btn" title="Informació" aria-label="Informació">
          <span class="icon" aria-hidden="true">ℹ️</span>
        </button>
        <button id="options-btn" class="icon-btn" title="Opcions" aria-label="Opcions">
          <span class="icon" aria-hidden="true">⚙️</span>
        </button>
      </div>
    </div>
    <div id="level-selector"></div>
  </header>

  <main>
    <div id="status-indicators">
      <div id="timer-container">
        <span class="icon">⏱️</span>
        <span id="timer" aria-label="temporitzador">00:00</span>
      </div>
      <div id="best-time-container">
        <span class="icon">🏆</span>
        <span id="best-time" aria-label="millor temps">--:--</span>
      </div>
    </div>

    <div id="full-board-controls">
      <div id="sudoku-grid" class="grid" role="grid" aria-label="Tauler de Sudoku 9 per 9"></div>
      <div id="mobile-keypad" class="keypad" aria-label="Teclat numèric">
        <button data-num="1">1</button>
        <button data-num="2">2</button>
        <button data-num="3">3</button>
        <button data-num="4">4</button>
        <button data-num="5">5</button>
        <button data-num="6">6</button>
        <button data-num="7">7</button>
        <button data-num="8">8</button>
        <button data-num="9">9</button>
        <button data-num="0" id="erase-btn" title="Esborrar">
          <span class="icon">🗑️</span>
        </button>
      </div>
    </div>

    <span id="status-message" role="status" aria-live="polite"></span>

    <div class="actions">
      <div class="main-actions">
        <button id="new-game-btn" type="button" class="btn-3d"><span class="icon" aria-hidden="true">✨</span><span class="label">Nou</span></button>
        <button id="check-btn" type="button" class="btn-3d"><span class="icon" aria-hidden="true">✔️</span><span class="label">Comprova</span></button>
        <button id="hint-btn" type="button" class="btn-3d" title="Pista"><span class="icon" aria-hidden="true">💡</span><span class="label">Pista</span></button>
      </div>
      <div class="toggle-actions">
        <button id="notes-btn" type="button" class="toggle btn-3d"><span class="icon" aria-hidden="true">✏️</span><span class="label">Notes</span></button>
        <button id="feedback-btn" type="button" class="toggle btn-3d"><span class="icon" aria-hidden="true">⚡</span><span class="label">Feedback</span></button>
      </div>
      <div class="secondary-actions">
        <button id="undo-btn" type="button" class="icon-btn" title="Desfés"><span class="icon">↩️</span></button>
        <button id="redo-btn" type="button" class="icon-btn" title="Refés"><span class="icon">↪️</span></button>
      </div>
    </div>
  </main>

  <!-- Opcions Modal -->
  <div id="options-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="options-title">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="options-title">Opcions</h2>
        <button class="icon-btn modal-close" data-close="options-modal" aria-label="Tanca">✖</button>
      </div>
      <div class="modal-body">
        <div class="option-item">
          <span class="icon">✏️</span>
          <div class="text">
            <strong>Mode Notes</strong>
            <small>Activa les anotacions 3×3</small>
          </div>
          <label class="switch">
            <input type="checkbox" id="opt-notes">
            <span class="slider"></span>
          </label>
        </div>
        <div class="option-item">
          <span class="icon">⚡</span>
          <div class="text">
            <strong>Feedback Immediat</strong>
            <small>Mostra conflictes a l’instant</small>
          </div>
          <label class="switch">
            <input type="checkbox" id="opt-feedback">
            <span class="slider"></span>
          </label>
        </div>
        <div class="option-item">
          <span class="icon">🎨</span>
          <div class="text">
            <strong>Tema de Colors</strong>
            <small>Canvia l'aparença de l'app</small>
          </div>
          <div class="segmented">
            <button data-view="classic" class="seg">Clàssic</button>
            <button data-view="contrast" class="seg">Contrast</button>
            <button data-view="dark" class="seg">Fosc</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Modal -->
  <div id="info-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="info-title">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="info-title">Com Jugar</h2>
        <button class="icon-btn modal-close" data-close="info-modal" aria-label="Tanca">✖</button>
      </div>
      <div class="modal-body info-list">
        <div class="info-item">
          <strong class="info-title"><span class="icon">🎯</span> Objectiu</strong>
          <p class="info-desc">Omple la graella de 9x9 de manera que cada fila, cada columna i cada bloc de 3x3 contingui tots els números de l'1 al 9 sense repetir-se.</p>
        </div>
        <div class="info-item">
          <strong class="info-title"><span class="icon">✏️</span> Mode Notes</strong>
          <p class="info-desc">Activa'l per afegir o eliminar possibles números en una cel·la. Les notes es guarden si desactives el mode.</p>
        </div>
        <div class="info-item">
          <strong class="info-title"><span class="icon">💡</span> Pistes</strong>
          <p class="info-desc">Resol una cel·la automàticament. Disposes de 3 pistes per partida. El botó es desactiva quan s'esgoten.</p>
        </div>
        <div class="info-item">
          <strong class="info-title"><span class="icon">✔️</span> Comprovar</strong>
          <p class="info-desc">Verifica si la solució és correcta. Les cel·les amb errors es marcaran en vermell.</p>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <img src="assets/cc-by-nc-sa.svg" alt="Llicència Creative Commons" class="cc-logo">
    <div class="footer-text">
      <p>Aplicació creada per <strong>Felip Sarroca</strong> amb l'assistència de la IA.</p>
      <p class="license-text">
        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">
          Obra sota llicència CC BY-NC-SA 4.0
        </a>
      </p>
    </div>
  </footer>

  <script src="script.js"></script>
  
</body>
</html>
